pipelines:
  ci:
    secure_variables:
      DOCKER_USER: "AES:8Ff6X60DmQPio6kEyxna8g==:EdUyhmJwxfbBQ0pq5Nf2KA=="
    group: new-group
    # parameters:
    #   commitID: value1
    materials:
      mygit:
        git: https://github.com/MinaMaher0/GoCD_nodejs_example
    stages:
      - build-docker-image:
          jobs:
            build-image:
              tasks:
              - exec:
                  command: docker
                  arguments:
                    - build
                    - -t
                    - node-app
                    - . 
      - pull-image:
          jobs:
            build-image:
              tasks:
              - exec:
                  command: docker
                  arguments:
                    - pull 
                    - "$DOCKER_USER/jenkins-ansible"
      
      # - push-image-to-dockerhub:
      #     jobs:
      #       print:
      #         tag-image:
      #         - exec:
      #             command: docker
      #             arguments:
      #               - tag
      #               - -t
      #               - node-app
      #               - . 
      
              

